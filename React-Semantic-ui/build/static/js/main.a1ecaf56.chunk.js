(this["webpackJsonpreact-semantic-ui-app"]=this["webpackJsonpreact-semantic-ui-app"]||[]).push([[0],{153:function(e,t){e.exports={sorter:function(e,t){var a={results:[]};return Object.size(e)&&e.data.forEach((function(e,n){var r={Name:e.Name,IMG_URL:e.IMG_URL,Rating:e.rating,URL:e.URL,IngredientsMissing:[],IngredientsMatches:[],missingCount:0},i=e.Ingredients.split(","),l=!0;i.forEach((function(e,a){l=!0,t.items.forEach((function(t,a){e.includes(t.toLowerCase())&&-1==r.IngredientsMatches.indexOf(t.toLowerCase())&&(l=!1,r.IngredientsMatches.push(e))})),l&&(r.IngredientsMissing.push(e),r.missingCount+=1)})),a.results.push(r)})),a.results.sort((function(e,t){return t.IngredientsMatches.length-e.IngredientsMatches.length})),console.log(a),a}}},186:function(e,t,a){e.exports=a(331)},331:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(36),l=a.n(i),c=a(150),s=a(151),o=a(38),d=a(175),m=a(174),u=a(96),h=a.n(u),g=a(152),p=a.n(g),k=[{key:1,text:"Frukost",value:"Frukost"},{key:2,text:"Huvudr\xe4tt",value:"Huvudr\xe4tt"},{key:3,text:"Middag",value:"Middag"},{key:4,text:"Efterr\xe4tt",value:"Efterr\xe4tt"}],v=[{key:1,text:"Vegetarisk",value:"Vegterainsk"},{key:2,text:"Vegan",value:"Vegan"},{key:3,text:"Glutenfri",value:"Glutenfri"},{key:4,text:"Laktosfri",value:"Laktosfri"}],f=[{key:1,text:"Under 15min",value:"Under 15min"},{key:2,text:"Under 30min",value:"Under 30min"},{key:3,text:"Under 45min",value:"Under 45min"},{key:4,text:"Under 60min",value:"Under 60min"},{key:5,text:"\xd6ver 60min",value:"\xd6ver 60min"}],E=[{key:1,text:"F\xe4rre \xe4n 3",value:"Mindre \xe4n 3"},{key:2,text:"F\xe4rre \xe4n 4",value:"Mindre \xe4n 4"},{key:3,text:"Fler \xe4n 4",value:"H\xf6gre \xe4n 4"},{key:4,text:"5 sj\xe4rnor",value:"5 sj\xe4rnor"}],y=[{key:1,text:"Under 200 kcal",value:"Under 200 kcal"},{key:2,text:"Under 500 kcal",value:"Under 500 kcal"},{key:3,text:"Under 1000 kcal",value:"Under 1000 kcal"}],b=a(153),I=a(344),x=a(341),C=a(55),S=a(343),w=a(39),U=a(345),M=a(173),j=a(339),R=a(332),F=a(342),O=a(340),K=a(30),_=a(154),L=a.n(_);Object.size=function(e){var t,a=0;for(t in e)e.hasOwnProperty(t)&&a++;return a};var z=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var n;return Object(c.a)(this,a),(n=t.call(this,e)).ingredients={items:[]},n.filters={mealtime:"",diet:"",time:"",grade:"",kcal:"",climateSmart:!1},n.fetchSearchResults=function(e,t){if(h.a.post("/api/recipe",{keywords:e,filter:t},{headers:{"Content-Type":"application/json"}}).then((function(e){n.setState({results:e.data})})).catch((function(e){(h.a.isCancel(e)||e)&&(console.log("Failed to fetch the data. Please check network"),n.setState({loading:!1,message:"Failed to fetch the data. Please check network"}))})),n.state.cookieconsent_status){if(!1===n.state.initialize_ga){K.a.initialize("UA-163900334-1","auto");L.a.initialize({gtmId:"GTM-K9WDKDN"}),n.state.initialize_ga=!0}K.a.pageview("search.php?keywords="+e),e.forEach((function(e,t){K.a.pageview("search.php?keyword="+e)})),t.diet&&K.a.event({category:"Specialkost",action:t.diet,value:t.diet}),t.mealTime&&K.a.event({category:"M\xe5ltid",action:t.mealTime,value:t.mealTime}),t.time&&K.a.event({category:"Tillagningstid",action:t.time,value:t.time}),t.kcal&&K.a.event({category:"Kcal",action:t.kcal,value:t.kcal}),t.climateSmart&&K.a.event({category:"Klimartsmart",action:"Klimartsmart",value:"true"})}},n.removeIngredients=function(e){var t=e.target.getAttribute("aria-hidden");n.setState((function(e){return{items:n.ingredients.items.splice(n.ingredients.items.indexOf(t),1),name:""}}))},n.handleSearchKeydown=function(e){"Enter"===e.key&&n.addIngredients()},n.handleClick=function(e,t){var a=t.index,r=n.state.activeIndex===a?-1:a;n.setState({activeIndex:r})},n.handleChangeFilter=function(e,t){"climateSmart"===t.name?n.filters[t.name]=t.checked:n.filters[t.name]=t.value,n.handleSearch()},n.fetchSearchResults=n.fetchSearchResults.bind(Object(o.a)(n)),n.handleSearch=n.handleSearch.bind(Object(o.a)(n)),n.addIngredients=n.addIngredients.bind(Object(o.a)(n)),n.handleSearchKeydown=n.handleSearchKeydown.bind(Object(o.a)(n)),n.state={cookieconsent_status:p.a.get("cookieconsent_status"),initialize_ga:!1,activeIndex:null,query:"",results:{},loading:!1,message:""},n}return Object(s.a)(a,[{key:"addIngredients",value:function(){var e=this;this.setState((function(t){if(""!==document.getElementById("searchInput").value){var a=e.ingredients.items.push(document.getElementById("searchInput").value);return document.getElementById("searchInput").value="",{items:a,name:""}}}))}},{key:"handleSearch",value:function(){var e=this;this.setState((function(t){e.fetchSearchResults(e.ingredients.items,e.filters)}))}},{key:"renderSearchResults",value:function(){var e=this,t=-1,a=this.state.activeIndex,n=Object(b.sorter)(this.state.results,this.ingredients);if(Object.size(this.state.results))return r.a.createElement(I.a,{centered:!0,columns:1},n.results.map((function(n){return t++,r.a.createElement(I.a.Row,null,r.a.createElement(I.a.Column,null,r.a.createElement(x.a.Group,null,r.a.createElement(x.a,null,r.a.createElement(x.a.Image,{as:"a",onClick:function(){return window.open(n.URL,"_blank")},size:"small",src:n.IMG_URL}),r.a.createElement(x.a.Content,null,r.a.createElement(x.a.Header,{as:"a",onClick:function(){return window.open(n.URL,"_blank")}},n.Name),r.a.createElement(x.a.Meta,null,n.IngredientsMatches.map((function(e){return r.a.createElement(C.a,{color:"green"},e)})),r.a.createElement("br",null),r.a.createElement(S.a,null,r.a.createElement(S.a.Title,{indexstate:a&&t,index:t,onClick:e.handleClick},r.a.createElement(w.a,{name:"dropdown"}),"Saknade ingredienser: (",n.missingCount,")"),r.a.createElement(S.a.Content,{active:a===t},n.IngredientsMissing.map((function(e){return r.a.createElement(C.a,{size:"small",id:"missing",color:"red"},e)}))))),r.a.createElement(x.a.Extra,null,r.a.createElement(U.a,{icon:"star",rating:n.Rating,maxRating:5,disabled:!0}))))),r.a.createElement("hr",{className:"myDivivder"})))})))}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(M.a,{size:"big",class:"recipe-image-square__image",id:"logopic",href:"http://recepthj\xe4lp.se",src:".\\logo.png"}),r.a.createElement("br",null),r.a.createElement(C.a.Group,null,r.a.createElement(C.a,{basic:!0,image:!0},r.a.createElement(w.a,{name:"plus circle",color:"blue"}),"1. L\xe4gg till de ingredienser som skall anv\xe4ndas."),"  ",r.a.createElement("br",null),r.a.createElement(C.a,{basic:!0,image:!0},r.a.createElement(w.a,{name:"filter",color:"blue"}),"2. Filtrera recepten enligt dina preferenser."),"  ",r.a.createElement("br",null),r.a.createElement(C.a,{basic:!0,image:!0},r.a.createElement(w.a,{name:"hand pointer",color:"blue"}),"3. Tryck p\xe5 ett recept som lockar!")),"  ",r.a.createElement("br",null),"  ",r.a.createElement("br",null),r.a.createElement(j.a,{onKeyDown:this.handleSearchKeydown,id:"searchInput",style:{minWidth:"50%"},icon:r.a.createElement(w.a,{name:"plus circle",color:"blue",link:!0,onClick:this.addIngredients}),placeholder:"Fyll i ingredienser"}),r.a.createElement(R.a,{onClick:this.handleSearch},r.a.createElement(w.a,{name:"search"})),r.a.createElement("br",null),r.a.createElement("div",{id:"divIngredients",onClick:this.removeIngredients},this.ingredients.items.map((function(e){return r.a.createElement(C.a,null,"  ",e,"     ",r.a.createElement(w.a,{"aria-hidden":e,name:"close"}),"   ")}))),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(F.a,{name:"mealtime",floating:!0,clearable:!0,compact:!0,placeholder:"M\xe5ltid",options:k,onChange:this.handleChangeFilter,selection:!0}),r.a.createElement(F.a,{name:"diet",floating:!0,clearable:!0,compact:!0,placeholder:"Kosth\xe5llning",options:v,onChange:this.handleChangeFilter,selection:!0}),r.a.createElement(F.a,{name:"time",floating:!0,clearable:!0,compact:!0,placeholder:"Tillagningstid",options:f,onChange:this.handleChangeFilter,selection:!0}),r.a.createElement(F.a,{name:"grade",floating:!0,clearable:!0,compact:!0,placeholder:"Betyg",options:E,onChange:this.handleChangeFilter,selection:!0}),r.a.createElement(F.a,{name:"kcal",floating:!0,clearable:!0,compact:!0,placeholder:"Kcal",options:y,onChange:this.handleChangeFilter,selection:!0}),r.a.createElement(O.a,{id:"climateSmart",name:"climateSmart",toggle:!0,label:"Klimartsmart",onChange:this.handleChangeFilter}),r.a.createElement("br",null),r.a.createElement("br",null),this.renderSearchResults())}}]),a}(r.a.Component),T=document.createElement("link");T.rel="stylesheet",T.href="https://cdn.jsdelivr.net/npm/semantic-ui/dist/semantic.min.css",document.head.appendChild(T),l.a.render(r.a.createElement(z,null),document.getElementById("root"))}},[[186,1,2]]]);
//# sourceMappingURL=main.a1ecaf56.chunk.js.map